<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Fill Me In" />
  <meta name="author" content="John Doe" />

  <!-- This start file was build by Paul Cheney  -->
  <title>08 Boston</title>

  <!-- TELLS PHONES NOT TO LIE ABOUT THEIR WIDTH & stops the font from enlarging when a phone is turned sideways-->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- STYLE SHEETS -->
  <link href="css/styles.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min.js"></script>
  <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/231648/ThrowPropsPlugin.min.js"></script>
  <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/231648/Draggable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

</head>

<body>
  <div id="headerWrapper">
    <img id="fullImage" src="images/headerBackground.jpg" alt="headerBackground" />
    <img id="mediumImage" src="images/headerBackgroundMedium.jpg" alt="headerBackground" />
    <img id="smallImage" src="images/headerBackgroundSmall.jpg" alt="headerBackground" />
    <!-- HEADER HERE -->
    <header>
      <div id="companyInfo">
        <h1>Boston City</h1>
        <h2>Where History Comes Alive</h2>
      </div>
    </header>
  </div>
  <!--end of headerWrapper-->

  <!-- NAVIGATION HERE -->
  <div id="navWrapper">
    <nav class="clearfix">
      <ul>
        <li id="mobileMenu">
          <a href="#" class="fa fa-bars"></a>
        </li>
        <li class="active menuItem">
          <a href="#">Visit</a>
        </li>
        <li class=" menuItem">
          <a href="#">Departments</a>
        </li>
        <li class="menuItem">
          <a href="#">Services</a>
        </li>
        <li class="menuItem">
          <a href="#">Pay Bills</a>
        </li>
        <li class="menuItem">
          <a href="#">Meetings</a>
        </li>
        <li class="menuItem">
          <a href="#">Help</a>
        </li>
      </ul>
    </nav>
  </div>
  <!--end ofnavWrapper-->

  <!-- CONTENT HERE -->
  <div id="mainWrapper">
    <main>
      <div class="carousel_container">

        <div class="carousel_items">
          <ul>
            <li class="carousel_item" id="item_0">
              <div class="descriptiveText">City Hall Plaza</div>
              <picture>
                <source media="(min-width: 37rem)" srcset="images/slider1.jpg">
                <source media="(max-width: 37rem)" srcset="images/slider1small.jpg">
                <img src="images/slider1.jpg" alt="slider1" />
              </picture>
            </li>
            <li class="carousel_item" id="item_1">
              <div class="descriptiveText">Leonard P. Zakim Bunker Hill Memorial Bridge</div>
              <picture>
                <source media="(min-width: 37rem)" srcset="images/slider2.jpg">
                <source media="(max-width: 37rem)" srcset="images/slider2small.jpg">
                <img src="images/slider2.jpg" alt="slider2" />
              </picture>
            </li>
            <li class="carousel_item" id="item_2">
              <div class="descriptiveText">Old Town Trolley</div>
              <picture>
                <source media="(min-width: 37rem)" srcset="images/slider3.jpg">
                <source media="(max-width: 37rem)" srcset="images/slider3small.jpg">
                <img src="images/slider3.jpg" alt="slider3" />
              </picture>
            </li>
            <li class="carousel_item" id="item_3">
              <div class="descriptiveText">Active Student Population</div>
              <picture>
                <source media="(min-width: 37rem)" srcset="images/slider4.jpg">
                <source media="(max-width: 37rem)" srcset="images/slider4small.jpg">
                <img src="images/slider4.jpg" alt="slider4" />
              </picture>
            </li>
            <li class="carousel_item" id="item_4">
              <div class="descriptiveText">The Old State House</div>
              <picture>
                <source media="(min-width: 37rem)" srcset="images/slider5.jpg">
                <source media="(max-width: 37rem)" srcset="images/slider5small.jpg">
                <img src="images/slider5.jpg" alt="slider5" />
              </picture>
            </li>
          </ul>
        </div>
        <div class="nav_dots"></div>
        <h2>Plan Your Visit</h2>
        <div id="contentWrapper">
          <a href="#">
            <div class="colorCard" id="card1">
              <img src="images/icon1.png" alt="icon1" />
              <h3>PLACES TO STAY</h3>
            </div>
          </a>
          <a href="#">
            <div class="colorCard" id="card2">
              <img src="images/icon2.png" alt="icon2" />
              <h3>WALK THE RED LINE</h3>
            </div>
          </a>
          <a href="#">
            <div class="colorCard" id="card3">
              <img src="images/icon3.png" alt="icon3" />
              <h3>PASS TO THE CITY</h3>
            </div>
          </a>
          <a href="#">
            <div class="colorCard" id="card4">
              <img src="images/icon4.png" alt="icon4" />
              <h3>FINE DINING</h3>
            </div>
          </a>
        </div>
      </div>
    </main>
  </div>
  <!--end of mainWrapper-->
  <!-- FOOTER HERE -->
  <div id="footerWrapper">
    <footer>
      <div id="copywrite">© 2017 • Company Name • Phone 1-800-555-1234 • Login</div>
    </footer>
  </div>
  <!--end of footerWrapper-->

  <script type="text/javascript">
    /* Toggle between showing and hiding the navigation menu links when the user clicks on the hamburger menu / bar icon */
    function showHideMenu(elementClass) {
      document.querySelectorAll(elementClass).forEach(element => {
        element.style.display = (window.getComputedStyle(element).display === "none") ? "block" : "none";
        console.log(element)
      })
    }

    document.querySelector('#mobileMenu > a').addEventListener('click', function () { showHideMenu('.menuItem') })

    let activeID = 0
    let carousel_count = $('.carousel_item').length
    let $carouselItems = $('.carousel_items')
    let $carouselItem = $('.carousel_item')
    let $arrowPrev = $('.item_prev')
    let $arrowNext = $('.item_next')
    let $itemArrow = $('.item_arrow')
    let $navDot = $('.nav_dot');
    let $navDots = $('.nav_dots')
    let swipeDir
    let slideSpeed = .45
    let slideMeth = Power2.EaseInOut
    let itemW = 1024

    function carousel() {

      if (window.innerWidth < 592) { itemW = 569 }
      else { itemW = 1024 }

      init();

    }

    //
    function init() {

      $carouselItems.css({ 'width': (itemW * carousel_count) + 'px' });
      $navDots.css({ 'width': (25 * carousel_count) + 'px' });

      let navDotCount = $('.nav_dot').length;
      setupDraggable();
      if (navDotCount < 1) { setupDots(); }
      navigateSlide();
    }

    //
    function setupDraggable() {

      Draggable.create($carouselItems, {
        type: 'x',
        edgeResistance: 0.90,
        dragResistance: 0.0,
        bounds: '.carousel_container',
        onDrag: updateDirections,
        onThrowUpdate: updateDirections,
        throwProps: true,
        onDragStart: function (evt) { },
        onDragEnd: function () {

          if (swipeDir == 'left') { activeID++ }
          else if (swipeDir == 'right') { activeID-- };

          navigateSlide();
        }
      });
    };

    // navigate slide
    function navigateSlide() {

      if (activeID >= carousel_count - 1) activeID = carousel_count - 1;
      if (activeID <= 0) activeID = 0;

      var xTarget = ((activeID * itemW) * -1);

      TweenMax.to($carouselItems, slideSpeed, { x: xTarget, ease: slideMeth, onComplete: slideDone });
    }

    // set up dots
    function setupDots() {
      for (var i = 0; i < carousel_count; i++) {
        $navDots.append('<div class="nav_dot" id="dot_' + i + '"></div>');
      }
      $navDot = $('.nav_dot');
    }

    function slideDone() {

      $navDot.css({ backgroundColor: '#000' });

      //
      TweenMax.to($navDot, .35, { scale: 1, color: 0x000000 });
      TweenMax.to($('#dot_' + activeID), .35, { scale: 1.5, backgroundColor: 'transparent', color: 0x000000 });

      //
      if (activeID == 0) { $arrowPrev.fadeOut() }
      else { $arrowPrev.fadeIn() }

      if (activeID + 1 == carousel_count) { $arrowNext.fadeOut() }
      else { $arrowNext.fadeIn() }
    }

    //
    function updateDirections() {
      swipeDir = this.getDirection("start");
    }

    //$itemArrow.click(function() {
    $itemArrow.on('click', function () {

      if (Modernizr.touch) return;

      if ($(this).hasClass('item_next')) { activeID++ }
      else { activeID-- };

      navigateSlide();
    });

    $itemArrow.on('touchstart', function () {
      if ($(this).hasClass('item_next')) { activeID++ }
      else { activeID-- };

      navigateSlide();
    });

    $navDot.hover(
      function () {
        TweenMax.to($(this), .35, { scale: 1.5 });
      }, function () {
        if ($(this).attr('id').split('_')[1] == activeID) return;
        TweenMax.to($(this), .35, { scale: 1.0 });
      }
    );

    $navDot.click(function () {
      var dotID = $(this).attr('id').split('_')[1];
      activeID = dotID;

      navigateSlide();
    });

    //
    $carouselItem.mousedown(function () {
      activeID = $(this).attr('id').split('_')[1];

      $(this).removeClass('grab');
      $(this).addClass('grabbing');

    });

    //   
    $carouselItem.mouseenter(function () {
      $(this).removeClass('grabbing');
      $(this).addClass('grab');
    });

    $carouselItem.mouseup(function () {
      $(this).removeClass('grabbing');
      $(this).addClass('grab');
    });

    $(window).resize(carousel);
    carousel()

  </script>
</body>

</html>